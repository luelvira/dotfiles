#+TITLE: Polybar config
#+AUTHOR: Lucas Elvira Mart√≠n
#+DATE: [2023-11-26 Sun]
#+PROPERTY: header-args :tangle config.ini
#+auto_tangle: t 
* Polybar
To learn more about how to configure Polybar go to: [[https://github.com/jaagr/polybar][jaagr/polybar]]
** Global settings
#+begin_src conf
[global/wm]
margin-bottom = 0
margin-top = 0

[settings]
throttle-output = 5
throttle-output-for = 10
screenchange-reload = true
compositing-background = over
compositing-foreground = over
compositing-overline = over
compositing-underline = over
compositing-border = over
#+end_src
** Colors

I borrowed the color setup from
[[https://gitlab.com/dwt1/dotfiles/-/blob/master/.config/polybar/README.org
]]
#+begin_src conf
[colors]
background = ${dracula.background}
foreground = ${dracula.foreground}
color0     = ${dracula.color0}
color1     = ${dracula.color1}
color2     = ${dracula.color2}
color3     = ${dracula.color3}
color4     = ${dracula.color4}
color5     = ${dracula.color5}
color6     = ${dracula.color6}
color7     = ${dracula.color7}
color8     = ${dracula.color8}
color9     = ${dracula.color9}
color10    = ${dracula.color10}
color11    = ${dracula.color11}
color12    = ${dracula.color12}
color13    = ${dracula.color13}
color14    = ${dracula.color14}
color15    = ${dracula.color15}
alert      = ${dracula.color1}
[dracula]
background = #282a36
foreground = #f8f8f2
color0     = #000000
color1     = #ff5555
color2     = #50fa7b
color3     = #f1fa8c
color4     = #bd93f9
color5     = #ff79c6
color6     = #8be9fd
color7     = #bfbfbf
color8     = #4d4d4d
color9     = #ff6e67
color10    = #5af78e
color11    = #f4f99d
color12    = #caa9fa
color13    = #ff92d0
color14    = #9aedfe
color15    = #e6e6e6
#+end_src

* Bars

The following settings are like a template for the rest of the bars.

#+begin_src conf
[bar/main]
width=100%
height=27
radius = 0
line-size = 0
border-size = 0
padding-left = 0
padding-right = 1
module-margin-left = 1
module-margin-right = 1
monitor=${env:MONITOR:}
enable-ipc = true
font-0 = "Fira Code Nerd Font:size=12;4"
font-1 = Font Awesome:size=13;4
font-2 = HackNerdFont:size=12;4
font-3 = "Noto Sans:size=11;1"
cursor-click = pointer
background = ${dracula.background}
foreground = ${dracula.foreground}
#+end_src

** Left bat
The bar for the first monitor ( the monitor on the left)

#+begin_src conf
[bar/left]
inherit = bar/main
monitor = DP-1
modules-left = i3 xwindow
modules-center = date
modules-right = bluetooth pulseaudio xkeyboard

tray-position = right
tray-detached = false
tray-maxsize = 16
tray-background = ${colors.background}
tray-offset-x = 0
tray-offset-y = 0
tray-padding = 0
tray-scale = 1.0
#+end_src

** Right bar

#+begin_src conf
[bar/right]
inherit = bar/main
monitor = HDMI-0
modules-left = i3 uptime
modules-right = fs-root fs-home memory cpu wired-network
#+end_src

* List of modules used

** Bluetooth
#+begin_src emacs-lisp
[module/bluetooth]
type = custom/script
exec = ~/.local/bin/bluetooth.sh
click-left = ~/.local/bin/bluetooth.sh --toggle
click-right = "~/.local/bin/bluetooth.sh --state"
tail = true
format-padding = 3
#+end_src
** TODO CPU
** Date
#+begin_src conf
[module/date]
type = custom/script
interval = 1
exec = echo $(date '+%a %b %d, %Y %H:%M')
format-prefix = "ÔÑ≥ "
format-foreground = ${colors.foreground}
format-prefix-foreground = ${colors.color6}
format-background = ${colors.background}
format-underline = ${colors.color4}
format-margin = 2
format-padding = 0
format = üïì <label>
#+end_src

** Filesystem

I create a base template for the file system module and then 2 instance of them,
one per mount point. Without this little hack, I won't be able to customize the
mount point view.

#+begin_src conf
[filesystem]
type = internal/fs
interval = 25
label-mounted = %mountpoint% %percentage_used%%
format-mounted-margin = 0
format-mounted-padding = 0
format-mounted = <label-mounted>
#+end_src

For the root mount point

#+begin_src conf
[module/fs-root]
inherit = filesystem
mount-0 = /
;label-mounted = "%{F#8be9fd}Û∞®£%{F-} %percentage_used%%"
label-mounted = "%{F#8be9fd}ÔÇ†%{F-} %percentage_used%%"
#+end_src

For the home mount point
#+begin_src conf
[module/fs-home]
inherit = filesystem
mount-0 = /home
label-mounted = "%{F#8be9fd}Û±Ç∂%{F-} %percentage_used%%"
#+end_src

** i3
#+begin_src conf
[module/i3]
type = internal/i3
; Only show workspaces defined on the same output as the bar
; Useful if you want to show monitor specific workspaces
; on different bars. Default: false
pin-workspaces = true
; This will split the workspace name on ':'
; Default: false
strip-wsnumbers = true
; Create click handler used to focus workspace
; Default: true
enable-click = true

;; setup the icosn
ws-icon-default = ÓØÖ

label-mode = %mode%
label-mode-padding = 0

label-focused = ÓØÖ
label-focused-padding = 1
label-focused-foreground = ${colors.color10}

label-unfocused = ÔÑå
label-unfocused-padding = 1
label-unfocused-foreground = ${colors.color4}

label-visible = ÓØÖ
label-visible-padding = 1
label-visible-foreground = ${colors.color4}

label-urgent = %icon%
label-urgent-foreground = ${colors.color9}
label-urgent-padding = 1
#+end_src

** Memory
#+begin_src conf
[module/memory]
type = internal/memory
format-prefix = "ÓØ§ "
format-prefix-foreground = ${colors.color6}
interval = 2
format-foreground = ${colors.foreground}
label = %used:2%
#+end_src

** Pulseaudio

#+begin_src conf
[module/pulseaudio]
format-background = ${colors.background}
format-foreground = ${colors.color5}
format-volume = <label-volume>
format-volume-font = 5
format-volume-prefix = "ÔÄ® VOL "
format-volume-prefix-foreground = ${colors.color3}
label-muted = "  Û∞ùü  "
label-muted-foreground = ${color.foreground}
label-volume = %percentage%%
label-volume-font = 2
label-volume-foreground = ${root.foreground}
ramp-volume-0 = ÔÄß
ramp-volume-1 = Ôë©
ramp-volume-2 = Ôë©
type = internal/pulseaudio
#+end_src

** spotify

#+begin_src conf
[module/spotify]
type = custom/script
exec = ~/.config/polybar/scripts/spotify.sh
click-left = "~/.config/polybar/scripts/spotify.sh 1"
click-right = ~/.config/polybar/scripts/spotify.sh 3
format-padding = 1
#+end_src

** uptime
#+begin_src conf

[module/uptime]
type = custom/script
exec = uptime | awk -F, '{sub(".*up ",x,$1);print $1}'
interval = 100
label = %output%
format-foreground = ${colors.foreground}
format-background = ${colors.background}
# format-prefix = "üíª "
format-prefix = "Û±¶ü "
format-prefix-foreground = ${colors.color6}
format-underline = ${colors.color13}
format-margin = 2
format-padding = 0
#+end_src

** Volume

#+begin_src conf
[module/volume]
type = custom/script
exec=~/.config/polybar/scripts/volume.sh
label="Û∞ïæ %output%" 
click-left = "~/.config/polybar/scripts/volume.sh 1"
scroll-up = "~/.config/polybar/scripts/volume.sh 4"
scroll-down = "~/.config/polybar/scripts/volume.sh 5"
interval=1
#+end_src

** xkeyboard
#+begin_src conf 
  [module/xkeyboard]
  type = internal/xkeyboard
  blacklist-0 = num lock
  blacklist-1 = scroll lock
  label-active-font = 3
  layout-icon-default = 
  layout-icon-0 = us;U
  layout-icon-1 = es;E
  label-indicator-on = %icon%
  label-indicator-off = %icon%
  label-layout = %layout%
  label-layout-foreground = ${colors.foreground}
  label-indicator-padding = 2
  label-indicator-margin = 1
  label-indicator-foreground = ${colors.background}
  label-indicator-background = ${colors.foreground}

  indicator-icon-default = 
  indicator-icon-0 = caps lock;;Û∞™õ
  indicator-icon-1 = scroll lock;;+SL
  indicator-icon-2 = num lock;-NL;+NL
#+end_src

** xwindow

#+begin_src conf
[module/xwindow]
type = internal/xwindow
label = %title:0:40%
label-maxlen = 40
format-foreground = ${colors.color10}
format-background = ${colors.background}
format-margin = 2
format-padding = 0
#+end_src

** WiredNetwork
#+begin_src sh
[network-base]
type = internal/network
interval = 5
format-connected-prefix = "Ô†ó "
format-connected = <label-connected>
format-disconnected = <label-disconnected>
label-disconnected = %{F#F0C674}%ifname%%{F#707880} disconnected


[module/wired-network]
inherit = network-base
interface = wlp6s0
interface-type = wireless
interval = 1.0
label-active-font = 2
# format-connected-prefix = "Ôá´  "
format-disconnected-prefix = "Û∞ñ™ "
format-connected = <ramp-signal> <label-connected>
# label-connected = %essid% %downspeed:6% %upspeed:6%
label-connected = %essid%
label-connected-foreground = ${colors.foreground}
ramp-signal-4-foreground = ${colors.color2}
ramp-signal-3-foreground = ${colors.color10}
ramp-signal-2-foreground = ${colors.color5}
ramp-signal-1-foreground = ${colors.color9}
ramp-signal-0-foreground = ${colors.color8}

ramp-signal-0 = Û∞§Ø
ramp-signal-1 = Û∞§ü
ramp-signal-2 = Û∞§¢
ramp-signal-3 = Û∞§•
ramp-signal-4 = Û∞§®
#+end_src
